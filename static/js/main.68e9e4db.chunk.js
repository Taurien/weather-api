(this["webpackJsonpweather-api"]=this["webpackJsonpweather-api"]||[]).push([[0],{32:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(25),r=n.n(a),s=n(11),o=(n(32),n(2)),i=n(15),l=n(6),u=n.n(l),d=n(9),j=n(4),b=n(7),h=n.n(b),f=n(1),p=Object(c.createContext)(),m=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(j.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(null),l=Object(j.a)(o,2),b=l[0],m=l[1],x=Object(c.useState)(!1),O=Object(j.a)(x,2),g=O[0],v=O[1],w=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var c,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=+t.toFixed(2),a=+n.toFixed(2),e.next=4,h.a.get("https://api.openweathermap.org/data/2.5/weather?lat=".concat(c,"&lon=").concat(a,"&appid=").concat("5824cef04bb350250a37f8b214365025"));case 4:r=e.sent,m({currentWeather:r.data});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,c,a,r,o,i,l,d,j,b,f,p,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("https://geolocation-db.com/json/");case 2:return t=e.sent,n=t.data.IPv4,e.next=6,h.a.get("https://ipgeolocation.abstractapi.com/v1/?api_key=".concat("c4c5e56dcf2948789d5cd57e88d80542","&ip_address=").concat(n));case 6:c=e.sent,a=c.data,r=a.city,o=a.continent,i=a.continent_code,l=a.country,d=a.country_code,j=a.flag,b=a.latitude,f=a.longitude,p=a.region,m=a.timezone,s({city:r,continent:o,continent_code:i,country:l,country_code:d,flag:j,latitude:b,longitude:f,region:p,timezone:m}),w(b,f);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){y()}),[]);var N=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,c,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.coord,c=n.lon,a=n.lat,e.next=3,h.a.get("https://api.openweathermap.org/data/2.5/forecast?lat=".concat(a,"&lon=").concat(c,"&cnt=",9,"&appid=").concat("5824cef04bb350250a37f8b214365025"));case 3:return r=e.sent,e.next=6,h.a.get("http://api.openweathermap.org/data/2.5/air_pollution/forecast?lat=".concat(a,"&lon=").concat(c,"&appid=").concat("5824cef04bb350250a37f8b214365025"));case 6:s=e.sent,m(Object(i.a)(Object(i.a)({},b),{},{forecast:r.data,airPollution:s.data}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){(null===b||void 0===b?void 0:b.currentWeather.message)||void 0===(null===b||void 0===b?void 0:b.currentWeather)||N(b.currentWeather)}),[null===b||void 0===b?void 0:b.currentWeather]);var F={dataFromIP:r,weather:b,handleWeather:function(e){return m(e)},locationByGps:function(e){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords;v(!1),console.log("Your current position is:"),console.log("Latitude : ".concat(t.latitude)),console.log("Longitude: ".concat(t.longitude)),w(t.latitude,t.longitude)}),(function(e){console.log(e),console.warn("ERROR(".concat(e.code,"): ").concat(e.message)),v(!0)}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},gpsError:g};return Object(f.jsx)(p.Provider,{value:F,children:t})},x=p,O=(n(59),function(e){var t=e.handleCity,n=e.handleFetch;return Object(f.jsxs)("form",{action:"",className:"self-center absolute overflow-hidden rounded-full",onSubmit:function(e){return n(e)},children:[Object(f.jsx)("input",{type:"text",placeholder:"City Name",onChange:function(e){var n=e.target;return t(n)},className:"w-8/12 px-4 py-1"}),Object(f.jsx)("input",{type:"submit",value:"Search",className:"w-4/12 px-4 py-1"})]})}),g=n(27),v=(n(60),["currentWeather","forecast","airPollution","min"]),w=function(e){var t=e.currentWeather,n=e.forecast,a=(e.airPollution,e.min),r=void 0!==a&&a,s=(Object(g.a)(e,v),Object(o.f)()),i=(Object(c.useContext)(x).weather,Object(c.useState)(!1)),l=Object(j.a)(i,2),u=(l[0],l[1],function(){return Object(f.jsx)("div",{className:"forecast w-full flex flex-row py-2  overflow-scroll",children:null===n||void 0===n?void 0:n.list.map((function(e,t){var n=new Date(1e3*e.dt),c=function(e){return String(e).padStart(2,"0")};return Object(f.jsxs)("div",{className:"forecast_item flex flex-col items-center px-1",children:[Object(f.jsxs)("p",{className:" text-center",children:[c(n.getHours()),":",c(n.getMinutes())]}),Object(f.jsxs)("div",{className:"flex flex-col items-center",children:[Object(f.jsx)("p",{className:"min-w-max  font-bold text-center capitalize",children:e.weather[0].description}),Object(f.jsx)("img",{className:" w-14",src:"http://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png"),alt:e.weather[0].main})]}),Object(f.jsxs)("div",{className:"",children:[Object(f.jsx)("p",{children:e.main.temp_max}),Object(f.jsx)("hr",{}),Object(f.jsx)("p",{children:e.main.temp_min})]}),Object(f.jsxs)("p",{className:"",children:["Humidity:",e.main.humidity,"%"]})]},t)}))})});return Object(f.jsxs)("div",{className:"cityinfocard relative self-center desktop:min-w-min mobile:w-9/12 flex flex-col items-center rounded-lg p-3 mx-4 text-xs",children:[t.message?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("p",{children:t.message})}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"self-end inline-flex items-center font-bold text-sm",children:[Object(f.jsxs)("p",{children:[t.name," | ",t.sys.country]}),Object(f.jsx)("img",{className:"h-4 ml-1",src:"https://countryflagsapi.com/svg/".concat(t.sys.country),alt:"".concat(t.sys.country," flag")})]}),Object(f.jsxs)("div",{className:"h-20 w-64 inline-flex items-center justify-evenly overflow-hidden mb-2",children:[Object(f.jsxs)("div",{className:"relative w-24 h-24 flex flex-col justify-center",children:[Object(f.jsxs)("p",{className:"text-5xl text-center",children:[parseInt(t.main.temp-273.15),"\xb0"]}),Object(f.jsxs)("p",{className:"w-full absolute bottom-2 left-1/2 transform-center text-center ",children:["Feels like ",Object(f.jsxs)("b",{children:[t.main.feels_like,"\xb0"]})]})]}),Object(f.jsxs)("div",{className:" relative w-24 h-24 flex flex-col justify-center",children:[Object(f.jsx)("img",{className:"",src:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,"@2x.png"),alt:t.weather[0].main}),Object(f.jsx)("p",{className:"w-full absolute bottom-2 left-1/2 transform-center text-center  font-bold capitalize",children:t.weather[0].description})]})]}),Object(f.jsxs)("p",{className:"",children:["Humidity: ",t.main.humidity,"%"]}),Object(f.jsxs)("p",{className:" mb-2",children:[t.main.temp_max,"\xb0/",t.main.temp_min,"\xb0"]})]}),!t.message&&!r&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"inline-flex",children:[Object(f.jsxs)("p",{children:[t.wind.speed," km/h"]}),Object(f.jsxs)("p",{children:[t.wind.deg,"\xb0"]})]}),Object(f.jsx)(u,{})]}),!t.message&&r&&Object(f.jsx)("button",{className:" border border-solid border-yellow-300 px-2 py-1 text-base",onClick:function(){s({pathname:"/weather/".concat(t.name)})},children:"See more"})]})},y=function(){return Object(f.jsx)("div",{className:"load self-center",children:Object(f.jsx)("span",{children:"Loading..."})})},N=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useContext)(x),s=r.dataFromIP,o=r.weather,i=r.handleWeather,l=r.locationByGps,b=r.gpsError,p=function(e){var t=Object(c.useState)(null),n=Object(j.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!1),o=Object(j.a)(s,2),i=o[0],l=o[1],b=function(){var t=Object(d.a)(u.a.mark((function t(n){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r(null),l(!0),t.prev=3,t.next=6,h.a.get(e);case 6:c=t.sent,r(c.data),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),console.warn(t.t0),r(t.t0.response.data);case 14:l(!1);case 15:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}();return{response:a,loader:i,handleFetch:b}}("https://api.openweathermap.org/data/2.5/weather?q=".concat(n,"&appid=").concat("5824cef04bb350250a37f8b214365025")),m=p.response,g=p.loader,v=p.handleFetch;return Object(c.useEffect)((function(){null!==m&&i({currentWeather:m})}),[m]),Object(f.jsxs)("div",{className:"homeview h-full flex flex-col justify-center",children:[b&&Object(f.jsx)("div",{children:"gps error"}),Object(f.jsx)(O,{handleCity:function(e){var t=e.value;a(t)},handleFetch:v}),(!s||g)&&Object(f.jsx)(y,{}),s&&o&&Object(f.jsx)(w,{currentWeather:o.currentWeather,forecast:o.forecast,airPollution:o.airPollution,min:!0}),Object(f.jsx)("button",{className:" self-center border border-solid border-yellow-300 px-2 py-1 ",onClick:function(){return l()},children:"Use GPS"})]})},F=(n(61),function(){var e=Object(c.useContext)(x).weather,t=Object(o.f)();return Object(f.jsx)("div",{className:"weatherview h-full flex flex-col justify-center",children:e?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(w,{currentWeather:e.currentWeather,forecast:e.forecast,airPollution:e.airPollution}),Object(f.jsx)("button",{className:"self-center absolute  border border-solid border-yellow-300 px-2 py-1 text-base",onClick:function(){return t(-1)},children:"Go back"})]}):Object(f.jsx)(y,{})})}),k=n(26);n(62);var C=function(){var e=(new Date).getHours(),t=e>=16&&e<=18?"sunsetBg":e>=6&&e<=15?"dayBg":"nightBg";return Object(f.jsx)(k.a,{className:"flex flex-col ".concat(t),children:Object(f.jsx)(m,{children:Object(f.jsxs)(o.c,{children:[Object(f.jsx)(o.a,{exact:!0,path:"/weather-api",element:Object(f.jsx)(N,{})}),Object(f.jsx)(o.a,{path:"/weather/:name",element:Object(f.jsx)(F,{})})]})})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};r.a.render(Object(f.jsx)(s.a,{children:Object(f.jsx)(C,{})}),document.getElementById("root")),P()}},[[63,1,2]]]);
//# sourceMappingURL=main.68e9e4db.chunk.js.map